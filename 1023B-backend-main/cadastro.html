<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>cadastro estudante </title>
</head>
<body>

    <header>
        <i class="fa-regular fa-face-smile" style="color: #dedede;"></i>
        <h1>CADASTRE SEU ATLETA</h1>
        <nav>
          <a href="index.html">MENU</a>
          <a href="cadastro.html">CADASTRE</a>
          <a href="listar.html">LISTA</a>
        </nav>
      </header>
<div id="formulario">
    <h2>Formulário de Cadastro</h2>
    <form onsubmit="event.preventDefault();trataForma()">
        <label>Id</label>
        <input type="number" id="id" name="id" placeholder="id" required oninvalid="this.setCustomValidity('Por favor, preencha o ID')"
        oninput="this.setCustomValidity('')">
        <label>Nome</label>
        <input type="text" name="nome" id="nome" placeholder="Ex: nome" required oninvalid="this.setCustomValidity('Por favor, preencha o nome')"
        oninput="this.setCustomValidity('')">
        <label>Idade</label>
        <input type="number" name="idade" id="idade" placeholder="Ex: 18"min="5" max="80" required
         oninvalid="this.setCustomValidity('Informe uma idade válida (entre 5 e 80)')"
        oninput="this.setCustomValidity('')">
        <label>Altura</label>
        <input type="number" name="altura" id="altura" placeholder="Ex: 1.80"min="1" max="2.5" step="0.01" required
         oninvalid="this.setCustomValidity('Informe uma altura válida (mínimo 0.60m e máximo 2.50m)')"
        oninput="this.setCustomValidity('')">
        <label>Força</label>
        <input type="number" name="forca" id="forca" placeholder="de 1 a 5" min="1" max="5" required
         oninvalid="this.setCustomValidity('Força deve estar entre 1 e 5')"
        oninput="this.setCustomValidity('')">
        <label>Impulsão</label>
        <input type="number" name="implusao" id="implusao" placeholder="de 1 a 5" min="1" max="5" required
         oninvalid="this.setCustomValidity('Impulsão deve estar entre 1 e 5')"
        oninput="this.setCustomValidity('')">
        <label>Velocidade</label>
        <input type="number" name="velocidade" id="velocidade" placeholder="de 1 a 5" min="1" max="5" required 
        oninvalid="this.setCustomValidity('Velocidade deve estar entre 1 e 5')"
        oninput="this.setCustomValidity('')">
        <label>Resistência</label>
        <input type="number" name="resistencia" id="resistencia" placeholder="de 1 a 5" min="1" max="5" required 
        oninvalid="this.setCustomValidity('Resistência deve estar entre 1 e 5')"
        oninput="this.setCustomValidity('')">
        <label>Arremesso</label>
        <input type="number" name="arremesso" id="arremesso" placeholder="de 1 a 5" min="1" max="5" required 
        oninvalid="this.setCustomValidity('Arremesso deve estar entre 1 e 5')"
        oninput="this.setCustomValidity('')">
        <input type="submit" value="cadastrar atleta">
        <input type="reset" value="limpar">
    </form>
</div>  
    <script>
       async function trataForma(){
            const idInput = document.getElementById("id")
            const idNome = document.getElementById("nome")
            const idIdade = document.getElementById("idade")
            const idAltura = document.getElementById("altura")
            const idForca = document.getElementById("forca")
            const idImpulsao = document.getElementById("impulsao")
            const idVelocidade = document.getElementById("velocidade")
            const idResistencia = document.getElementById("resistencia")
            const idArremesso = document.getElementById("arremesso")
            
            const id = idInput.value
            const nome = idNome.value
            const idade = idIdade.value
            const altura = idAltura.value
            const forca = idForca.value
            const impulsao = idImpulsao.value
            const velocidade = idVelocidade.value
            const resistencia = idResistencia.value
            const arremesso = idArremesso.value

            const objaltetas = {
            id,
            nome,
            idade,
            altura,
            forca,
            implusao,
            velocidade,
            resistencia,
            arremesso
            }
            try{
                const resposta = await fetch("http://localhost:8001/atletas",{
            headers:{
                'content-type': 'application/json'
            },
            method:"post",
            body: JSON.stringify(objatletas)
        })
        if(resposta.status===404){
            alert("estudando dont gona exlcloid")
        }
        if(resposta.status===400){
            const dados = await resposta.json()
            alert("servedir conection wromg\n"+dados.mensagem)
        }
        if(resposta.status===200){
            alert("estadne insered sucefily")
        }  
              }catch(erro){
                console.log(erro)
                alert("deu errado na requisição do post \n"+"voçe ligou o back end com npm run dev?")
            }
        
        }
    </script>
         <footer>       
            <div id="footer_copyright">
                &#169 2023 Desenvolvimento por Teylor 1023B
            </div>
            </footer>
</body>
</html>