<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="style.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" crossorigin="anonymous" />
  <title>Comparar Atletas</title>
</head>

<body>
    
  <header>
    <i class="fa-regular fa-face-smile" style="color: #dedede;"></i>
    <h1>CADASTRE SEU ATLETA</h1>
    <nav>
      <a href="index.html">ATLETAS</a>
      <a href="cadastro.html">CADASTRE</a>
      <a href="comparar.html">COMPARAR</a>
      <a href="destaques.html">DESTAQUES</a>
      <a href="listar.html">LISTA</a>
    </nav>
  </header>


<main>
    <section>
      <h2>Top 3 Atletas por Quesito</h2>
      <label for="atributoBusca">Selecione o quesito:</label>
      <select id="atributoBusca">
        <option value="forca">Força</option>
        <option value="impulsao">Impulsão</option>
        <option value="velocidade">Velocidade</option>
        <option value="resistencia">Resistência</option>
        <option value="arremesso">Arremesso</option>
      </select>
      <button onclick="buscarTop3PorAtributo()">Buscar Top 3</button>
      <ul id="listaStatus"></ul>
    </section>
  </main>

  <script>
    let chart = null;

    async function carregarAtletas() {
      const resposta = await fetch("http://localhost:8001/atletas");
      const atletas = await resposta.json();

      const select1 = document.getElementById("atleta1");
      const select2 = document.getElementById("atleta2");

      atletas.forEach(atleta => {
        const option = new Option(`${atleta.id} - ${atleta.nome}`, atleta.id);
        select1.add(option.cloneNode(true));
        select2.add(option.cloneNode(true));
      });
    }

    async function buscarAtletaPorId(id) {
      try {
        const resposta = await fetch(`http://localhost:8001/atletas/${id}`);
        if (!resposta.ok) throw new Error("Atleta não encontrado");
        return await resposta.json();
      } catch (error) {
        alert(error.message);
        return null;
      }
    }

    async function buscarTop3PorAtributo() {
  const atributo = document.getElementById("atributoBusca").value;
  const resposta = await fetch("http://localhost:8001/atletas");
  const atletas = await resposta.json();

  // Ordenar decrescentemente pelo atributo escolhido
  const top3 = atletas
    .filter(a => typeof a[atributo] === 'number') // garantir que o atributo exista e seja numérico
    .sort((a, b) => b[atributo] - a[atributo])
    .slice(0, 3);

  const lista = document.getElementById("listaStatus");
  lista.innerHTML = "";

  if (top3.length === 0) {
    lista.innerHTML = "<li>Nenhum atleta encontrado.</li>";
    return;
  }

  top3.forEach((atleta, index) => {
    const li = document.createElement("li");
    li.textContent = `${index + 1}º - ${atleta.nome} [ ${atleta.id} ] (${atributo}: ${atleta[atributo]})`;
    lista.appendChild(li);
  });
}

    carregarAtletas();
  </script>
    <style>
        /* Container geral */
        main section {
          padding: 20px;
        }
    
        /* Lista como flex de cartões */
        #listaStatus {
          display: flex;
          flex-wrap: wrap;
          gap: 20px;
          list-style: none;
          margin: 20px 0;
          padding: 0;
          justify-content: flex-start;
        }
    
        /* Cada item vira um “card” */
        #listaStatus li {
          background-color: #0e0c0c;
          border-radius: 8px;
          width: 250px;
          padding: 15px;
          color: #fff;
          box-shadow: 0 2px 6px rgba(0,0,0,0.3);
          display: flex;
          flex-direction: column;
          align-items: center;
          text-align: center;
        }
    
        #listaStatus li p {
          margin: 8px 0;
          font-size: 1em;
        }
    
        #listaStatus li p strong {
          font-weight: bold;
        }
    
        /* Botão */
        button {
          background-color: #465a49;
          color: #fff;
          border: none;
          padding: 8px 16px;
          margin-left: 10px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 1em;
        }
    
        button:hover {
          background-color: #5a6c5b;
        }
    
        /* Select */
        select {
          padding: 6px;
          font-size: 1em;
          margin-left: 10px;
        }
    
        label {
          font-weight: bold;
          font-size: 1em;
        }
      </style>
    
  <footer>
    <div id="footer_copyright">
      &#169 2023 Desenvolvimento por Teylor 1023B
    </div>
  </footer>
</body>
</html>
